{% extends 'base.html' %}
    {% block content %}
      <div class="container">
      <div class="text-center">
        <form action="{{ url_for('search', search_request=search_request) }}">
          <input class="form-control" type="text" name="search_request" placeholder="Search recipes">
          <button class="btn btn-primary" type="submit" name="action">Search</button>
        
        </form>
      </div>
            <form action="{{ url_for('get_recipes') }}" method="POST">
              <div class="row">
              <div class="col-4 custom-select" style="width:200px;">
                Cuisine:<br>
                <select name="recipe_type">
                                    <option selected="selected" value="All">All</option>
                                    <option value="Italian">Italian</option>
                                    <option value="Mexican">Mexican</option>
                                    <option value="Indian">Indian</option>
                                    <option value="Chinese">Chinese</option>
                                    <option value="Other">Other</option>
                </select>
                </div>
                <div class="col-4">
                  Meal time:<br>
                 <select name="meal_type">
                           <option selected="selected" value="All">All</option>
                            <option value="Breakfast">Breakfast</option>
                            <option value="Lunch">Lunch</option>
                            <option value="Dinner">Dinner</option>
                            <option value="Snack">Snack</option>
                           
                </select>
                </div>
                <div class="col-4">
                  Diet:<br>
                     <select name="diet">
                           <option selected="selected" value="All">-</option>
                            <option value="Gluten-free">Gluten-free</option>
                            <option value="Nut-free">Nut-free</option>
                            <option value="Vegan">Vegan</option>
                            <option value="Vegetarian">Vegetarian</option>
                           
                    </select>
                </div>
                 <!--search by preparation time-->

                      <!--search by diet-->
                      
                      <!--search by recommended-->
                      
                      <!--search by prep time-->
                      
                      <!--search by most viewed-->
                      
                      <!--search by highest rated-->
                      
                      <!--search by most discussed-->
                      
                      <!--search by new/old -->
                <div class="col-12 text-center">
                <button class="btn btn-primary" type="submit" name="action">Filter Results</button>
                </div>
                </div>
            </form>
            
       
              
        <h1 class="text-center">Search Results</h1>
        <div class="searchResults">
          
          <div class="row">
              {% for recipe in recipes %}
                <div class="search-block col-12 col-md-6 col-lg-4">
                  <div class="card">
                    <div class="image-container">
                      
                    {% if recipe.recipe_image != "" %}
                          <img src="{{recipe.recipe_image}}" alt="recipe image">
                    {% else %}
                          <img src="../static/img/dose-juice-unsplash.jpg" alt="recipe image">
                    {% endif %}
           
                    </div>
                    <div class="card-body">
                      <div class="card-title text-truncate">{{recipe.recipe_name}}</div>
                      <div class="card-title">by {{recipe.name}}</div>
                      <!--<p class="card-text text-truncate">{{ recipe.recipe_description }}</p>-->
                      <!--<p class="card-text"><small class="text-muted">Last updated {{recipe.last_updated}}</small></p>-->
                      <a href="{{ url_for('recipe', id=recipe._id) }}"><button type="button" class="btn btn-primary">Go to Recipe</button></a>
                    </div>
                  </div>
                </div>
               {% endfor %}
            </div>
        </div>

        <!--<div class="row">-->
          <!--  {% for recipe in recipes %}-->
          <!--  <div class="search-block col-6 col-md-4 col-lg-3">-->
          <!--    Divides the row into four with each column containing a search result-->
          <!--    <div class="search-result">-->
          <!--      <div>-->
          <!--        {% if recipe.recipe_image != "" %}-->
          <!--        <img src="{{recipe.recipe_image}}" alt="recipe image">-->
          <!--        {% else %}-->
          <!--        <img src="../static/img/dose-juice-unsplash.jpg" alt="recipe image">-->
          <!--        {% endif %}-->
          <!--      </div>-->
          <!--        <h5>{{recipe.recipe_name}} by {{recipe.name}}</h5>-->
          <!--      <div class="recipeDescription">-->
          <!--        <strong>{{ recipe.recipe_description }}</strong>-->
          <!--      </div>-->
          <!--      <div>-->
          <!--        <a href="{{ url_for('recipe', id=recipe._id) }}"><button type="button" class="btn btn-primary">Go to Recipe</button></a>-->
          <!--      </div>-->
          <!--    </div>-->
          <!--  </div>-->
          <!--   {% endfor %}-->
          <!--</div>-->
  
          
          <!--Pagination-->
          <div class="row">
            <div class="col">
              <nav aria-label="Page navigation example">
                <ul class="pagination justify-content-center">
                  {% if page > 1  %} 
                  <!--checks to see whether the first page is currently being viewed and if not, allows user to go back one page-->
                  <li class="page-item"><a class="page-link" href="{{ url_for('get_recipes', page=page-1) }}">Previous</a></li>
                  {% else %}
                  <li class="page-item disabled"><a class="page-link" href="#/" disabled>Previous</a></li>
                  {% endif %}
                  
                  
                  {% for page_number in pages %}
                    {% if page_number == page %}
                    <!--Page One-->
                    <li class="page-item"><a class="page-link" href="#">{{ page_number }}</a></li>
                    {% else %}
                    <!--All Other Pages-->
                    <li class="page-item"><a class="page-link" href="{{ url_for('get_recipes', page=page_number) }}">{{ page_number }}</a></li>
                    {% endif %}
                  {% endfor %}
                  
                  {% if page < pages | count | int %} 
                  <!--pipe converts page-count to integer, allowing it to be compared with page to determine if the user has any more pages to move through-->
                  <li class="page-item"><a class="page-link" href="{{ url_for('get_recipes', page=page+1) }}">Next</a></li>
                  
                  {% else %}
                  <li class="page-item disabled"><a class="page-link" href="#/">Next</a></li>
                  
                  {% endif %}
                  
                  
                </ul>
              </nav>
            </div>
          </div>
          
          
          
          
        </div>
  
    
    
    {% endblock %}
    



  
  


    
   