{% extends 'base.html' %} {% block content %}
<div class="container">
    <div class="heading-box-container">
        <div class="row heading-box">
            <div class="col text-center">
                <h1>Edit Recipe</h1>
            </div>
        </div>
        <div style="height: 25px; width: 100%;" >
            <svg viewBox="0 0 500 150" preserveAspectRatio="none" style="height: 100%; width: 100%;"><path d="M0.00,50.00 C150.00,150.00 350.00,150.00 500.00,50.00 L500.00,150.00 L0.00,150.00 Z" style="stroke: none; fill: #f3d250;"></path></svg>
        </div>
    </div>
    <div style="height: 25px; width: 100%; background-color: #f3d250;" >
        <svg viewBox="0 0 500 150" preserveAspectRatio="none" style="height: 100%; width: 100%;"><path d="M0.00,50.00 C150.00,150.00 350.00,150.00 500.00,50.00 L500.00,150.00 L0.00,150.00 Z" style="stroke: none; fill: #f78888;"></path></svg>
    </div>
    <div class="marginBottom" style="height: 25px; width: 100%; background-color: #f78888;" >
        <svg viewBox="0 0 500 150" preserveAspectRatio="none" style="height: 100%; width: 100%;"><path d="M0.00,50.00 C150.00,150.00 350.00,150.00 500.00,50.00 L500.00,150.00 L0.00,150.00 Z" style="stroke: none; fill: #ececec;"></path></svg>
    </div>
    <form action="{{ url_for('update_recipe', id=recipe._id) }}" method="POST" class="needs-validation" novalidate>
        <div class="form-group">
            <fieldset id="buildyourform">
    		    <legend>Recipe Name</legend>
                <div>
                    <input type="text" name="recipe_name" class="form-control" value="{{ recipe.recipe_name }}" minlength="3" maxlength="30" required>
                    <small class="form-text text-muted required">Required. Must be 3 to 30 characters long</small>
                    <div class="valid-feedback">
                      Looks good!
                    </div>
                    <div class="invalid-feedback">
                      Please enter a recipe name.
                    </div>
          	    </div>
        	</fieldset>
        </div>
        <div class="form-group">
            <fieldset>
                <legend>Recipe Description</legend>
                <div>
                    <textarea class="form-control" name="recipe_description"  rows="3" maxlength="450">{{recipe.recipe_description}}</textarea>
                    <small class="form-text text-muted required">Max 450 characters long</small>
                </div>
            </fieldset>
        </div>
        <div class="form-group">
            <fieldset>
    		    <legend>Cuisine</legend>
        	    <div>
                    <select class='custom-select' name="recipe_type" required>
                        <option value="">Choose</option>
                        <option value="African" {{ 'selected' if recipe.recipe_type == "African" else '' }}>African</option>
                        <option value="American" {{ 'selected' if recipe.recipe_type == "American" else '' }}>American</option>
                        <option value="British" {{ 'selected' if recipe.recipe_type == "British" else '' }}>British</option>
                        <option value="Chinese" {{ 'selected' if recipe.recipe_type == "Chinese" else '' }}>Chinese</option>
                        <option value="French" {{ 'selected' if recipe.recipe_type == "French" else '' }}>French</option>
                        <option value="Indian" {{ 'selected' if recipe.recipe_type == "Indian" else '' }}>Indian</option>
                        <option value="Irish" {{ 'selected' if recipe.recipe_type == "Irish" else '' }}>Irish</option>
                        <option value="Italian" {{ 'selected' if recipe.recipe_type == "Italian" else '' }}>Italian</option>
                        <option value="Japanese" {{ 'selected' if recipe.recipe_type == "Japanese" else '' }}>Japanese</option>
                        <option value="Mexican" {{ 'selected' if recipe.recipe_type == "Mexican" else '' }}>Mexican</option>
                        <option value="Spanish" {{ 'selected' if recipe.recipe_type == "Spanish" else '' }}>Spanish</option>
                        <option value="Thai" {{ 'selected' if recipe.recipe_type == "Thai" else '' }}>Thai</option>
                        <option value="Other" {{ 'selected' if recipe.recipe_type == "Other" else '' }}>Other</option>
                    </select>
                    <small class="form-text text-muted required">Required</small>
                     <div class="valid-feedback">
                      Looks good!
                    </div>
                    <div class="invalid-feedback">
                      Please choose a cuisine.
                    </div>
                </div>
        	</fieldset>
        </div>
        <div class="form-group">
            <fieldset>
    		    <legend>Meal Type</legend>
        	    <div>
                    <select class='custom-select' name="meal_type" required>
                        <option value="">Choose</option>
                        <option value="Breakfast" {{ 'selected' if recipe.meal_type == "Breakfast" else '' }}>Breakfast</option>
                        <option value="Lunch" {{ 'selected' if recipe.meal_type == "Lunch" else '' }}>Lunch</option>
                        <option value="Dinner" {{ 'selected' if recipe.meal_type == "Dinner" else '' }}>Dinner</option>
                        <option value="Dessert" {{ 'selected' if recipe.meal_type == "Dessert" else '' }}>Dessert</option>
                        <option value="Snack" {{ 'selected' if recipe.meal_type == "Snack" else '' }}>Snack</option>
                        <option value="Shake" {{ 'selected' if recipe.meal_type == "Shake" else '' }}>Shake</option>
                    </select>
                    <small class="form-text text-muted required">Required</small>
                     <div class="valid-feedback">
                      Looks good!
                    </div>
                    <div class="invalid-feedback">
                      Please enter a meal type.
                    </div>
                </div>
        	</fieldset>
        </div>
        <div class="form-group">
            <fieldset>
    		    <legend>Recipe Preptime</legend>
                <div>
                    <input type="text" class="form-control" name="recipe_preptime" value="{{ recipe.recipe_preptime }}" maxlength="20" required>
                    <small class="form-text text-muted required">Required. Max length of 20 characters.</small>
                    <div class="valid-feedback">
                      Looks good!
                    </div>
                    <div class="invalid-feedback">
                      Please enter a time.
                    </div>
                </div>
        	</fieldset>
        </div>
        <div class="form-group">
            <fieldset>
    		    <legend>Cooking Time</legend>
        	    <div>
                    <input type="text" class="form-control" name="recipe_cooktime" value="{{ recipe.recipe_cooktime }}" maxlength="20" required>
                    <small class="form-text text-muted required">Required. Max length of 20 characters.</small>
                    <div class="valid-feedback">
                      Looks good!
                    </div>
                    <div class="invalid-feedback">
                      Please enter a time.
                    </div>
                </div>
        	</fieldset>
        </div>
        <div class="form-group">
            <fieldset>
    		    <legend>Recipe Serves</legend>
        	    <div>
        	        <input type="text" class="form-control" name="recipe_serves"  value="{{ recipe.recipe_serves }}" maxlength="20" required>
        	        <small class="form-text text-muted required">Required. Max length of 20 characters.</small>
        	        <div class="valid-feedback">
                      Looks good!
                    </div>
                    <div class="invalid-feedback">
                      Please enter a number.
                    </div>
                </div>
        	</fieldset>
        </div>
        <div class="form-group">
            <fieldset>
    		    <legend>Add ingredients</legend>
        		<div class="field_wrapper">
        	        {% for ingredient in recipe.recipe_ingredients %}
        	            {% if loop.index == 1 %}
        	                <div>
        	                    <textarea class="form-control reduce" name="recipe_ingredient" rows="1" required>{{ingredient}}</textarea>
        	                </div>
        	            {% else %}
        	                <div>
        	                    <textarea class="form-control reduce" name="recipe_ingredient" rows="1">{{ingredient}}</textarea><a href="#" class="remove_button">&#10008;</a>
        	                </div>
        	            {% endif %}
        	         {% endfor %}
        	         <small class="form-text text-muted  required">Required</small>
        	         <div class="valid-feedback">
                      Looks good!
                     </div>
                     <div class="invalid-feedback">
                      Please add an ingredient.
                     </div>
            	 </div>
        	</fieldset>
    	    <a href="#/" class="add_button btn btn-primary" title="Add field">Add ingredient</a>
        </div>
        <div class="form-group">
            <fieldset>
		        <legend>Add steps</legend>
		        <div class="field_wrapper2">
    	            {% for step in recipe.recipe_steps %}
    	                {% if loop.index == 1 %}
    	                    <div>
    	                        <textarea class="form-control reduce" name="recipe_step" rows="2" value="" required>{{step}}</textarea>
    	                    </div>
    	                {% else %}
    	                    <div>
    	                        <textarea class="form-control reduce" name="recipe_step" rows="2" value="">{{step}}</textarea><a href="#" class="remove_button2">&#10008;</a>
    	                    </div>
    	                {% endif %}
    	            {% endfor %}
    	            <small class="form-text text-muted required">Required</small>
    	            <div class="valid-feedback">
                                  Looks good!
                    </div>
                    <div class="invalid-feedback">
                        Please add a step.
                    </div>
        	   </div>
	        </fieldset>
	        <a href="#/" class="add_button2 btn btn-primary" title="Add field">Add step</a>
        </div>
        <div class="form-group">
            <fieldset>
    		      <legend>Diet</legend>
                    <div class="custom-control custom-switch">
                      <input type="checkbox" class="custom-control-input" id="customSwitch1" name="diet" value="Vegetarian" {{ 'Checked' if "Vegetarian" in recipe.diet else '' }}>
                      <label class="custom-control-label" for="customSwitch1">Does not contain meat</label>
                    </div>
                    <div class="custom-control custom-switch">
                      <input type="checkbox" class="custom-control-input" id="customSwitch2" name="diet" value="Dairy-free" {{ 'Checked' if "Dairy-free" in recipe.diet else '' }}>
                      <label class="custom-control-label" for="customSwitch2">Does not contain dairy</label>
                    </div>
                     <div class="custom-control custom-switch">
                      <input type="checkbox" class="custom-control-input" id="customSwitch3" name="diet" value="Nut-free" {{ 'Checked' if "Nut-free" in recipe.diet else '' }}>
                      <label class="custom-control-label" for="customSwitch3">Does not contain nuts</label>
                    </div>
                    <div class="custom-control custom-switch">
                      <input type="checkbox" class="custom-control-input" id="customSwitch4" name="diet" value="Gluten-free" {{ 'Checked' if "Gluten-free" in recipe.diet else '' }}>
                      <label class="custom-control-label" for="customSwitch4">Gluten-free</label>
                    </div>
                     <div class="custom-control custom-switch">
                      <input type="checkbox" class="custom-control-input" id="customSwitch5" name="diet" value="Low-sugar" {{ 'Checked' if "Low-sugar" in recipe.diet else '' }}>
                      <label class="custom-control-label" for="customSwitch5">Low in sugar</label>
                    </div>
        	</fieldset>
        </div>
        <div class="form-group">
            <fieldset>
    		    <legend>Recipe Image</legend>
        	        <div>
                        <input type="text" name="recipe_image" class="form-control" value="{{ recipe.recipe_image }}">
          	        </div>
        	</fieldset>
        </div>
        <div class="form-group">
           <button class="btn btn-success" type="submit" name="action">Update Recipe</button>
           <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#exampleModal">
             Cancel
            </button>
        </div>
        <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Confirm changes</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                Are you sure you want to cancel? Any changes will be lost. 
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <a href="{{ url_for('recipe', id=recipe._id) }}"><button type="button" class="btn btn-danger">Return to Recipe Page</button></a>
              </div>
            </div>
          </div>
        </div>
    </form>
</div>
{% endblock %}