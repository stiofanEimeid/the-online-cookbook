{% extends 'base.html' %} 
    {% block content %}
    <div class="container">
        
     <div class="heading-box-container"> 
       <h1  class="text-center">Discover</h1>
        <div class="row heading-box">
            <div class="col">
          
            </div>
            <div class="col-12">
                <div class="row">
                    <div class="col-12">
                        <h2 class="text-center">General</h2>
                    </div>
                    <div class="col-12 col-md-4">
                        <p>Total number of recipes: {{ recipe_total }}</p>
                    </div>
                    <div class="col-12 col-md-4">
                        <p>Total number of users: {{ user_total }}</p>
                    </div>
                    <div class="col-12 col-md-4">
                    </div>
                </div>
            </div>
            
            <div style="height: 25px; width: 100%; " >
                <svg viewBox="0 0 500 150" preserveAspectRatio="none" style="height: 100%; width: 100%;"><path d="M0.00,50.00 C150.00,150.00 350.00,150.00 500.00,50.00 L500.00,150.00 L0.00,150.00 Z" style="stroke: none; fill: #90CCF4;"></path></svg>
            </div>
            
        </div>
        
        
    </div>
    
    <div style="height: 25px; width: 100%; background-color: #90CCF4;" >
                <svg viewBox="0 0 500 150" preserveAspectRatio="none" style="height: 100%; width: 100%;"><path d="M0.00,50.00 C150.00,150.00 350.00,150.00 500.00,50.00 L500.00,150.00 L0.00,150.00 Z" style="stroke: none; fill: #ececec;"></path></svg>
    </div>
          
    
   
        
       
        <div class="row recipe-row">
            <div class="col-12 col-md-6" align="center"> 
             <h4>Breakdown by Cuisine for Recipes Submitted</h4>
             <div id="chart-here"></div>
            </div>
              
            <div class="col-12 col-md-6"> 
                <h4>Breakdown by Cuisine for Recipes Viewed</h4>
                     <div id="another-chart-here"></div>
            </div>
        </div>
        
      <div class="row recipe-row">
            <div class="col-12"><h2 class='text-center'>Most Viewed Recipes</h2></div>
                   
         
                            <div class="col-12 col-md-5">
                            {% for recipe in top_recipe %}
                  
                                        <div class="image-container">
                                                  
                                                        {% if recipe.recipe_image != "" %}
                                                              <img src="{{recipe.recipe_image}}" alt="recipe image">
                                                        {% else %}
                                                              <img src="../static/img/dose-juice-unsplash.jpg" alt="recipe image">
                                                        {% endif %}
                                       
                                        </div>
                          
                                    <div>{{loop.index}}. {{recipe.recipe_name}}</div>
                                    <div>by {{recipe.author}}</div>
                                    <div>
                                            <a href="{{ url_for('recipe', id=recipe._id) }}"> <button type="button" class="btn btn-primary">Go to Recipe</button></a>
                                    </div>
                            {% endfor %}          
                            </div>
                        
        
                        
                    <div class="col-12 col-md-7">
                          <div class="row">
                              {% for recipe in top_recipes[2:5]%}
        
          
                                       <div class="col-12">
                                            <div>{{loop.index + 1}}. {{recipe.recipe_name}}</div>
                                            <div>by {{recipe.author}}</div>
                                            <div>
                                                <a href="{{ url_for('recipe', id=recipe._id) }}"> <button type="button" class="btn btn-primary">Go to Recipe</button></a></div>
                                        </div>
                               {% endfor %}
                                        
                    
                          </div>
                          </div>

        </div>
        
        
        <div class="row recipe-row">
            <div class="col-12"><h2 class='text-center'>Most Favourited Recipes</h2></div>
                   
         
                            <div class="col-12 col-md-5">
                            {% for recipe in top_favourite %}
                  
                                        <div class="image-container">
                                                  
                                                        {% if recipe.recipe_image != "" %}
                                                              <img src="{{recipe.recipe_image}}" alt="recipe image">
                                                        {% else %}
                                                              <img src="../static/img/dose-juice-unsplash.jpg" alt="recipe image">
                                                        {% endif %}
                                       
                                        </div>
                          
                                    <div>{{loop.index}}. {{recipe.recipe_name}}</div>
                                    <div>by {{recipe.author}}</div>
                                    <div>
                                            <a href="{{ url_for('recipe', id=recipe._id) }}"> <button type="button" class="btn btn-primary">Go to Recipe</button></a>
                                    </div>
                            {% endfor %}          
                            </div>
                        
        
                        
                    <div class="col-12 col-md-7">
                          <div class="row">
                              {% for recipe in most_favourited[2:5]%}
        
          
                                       <div class="col-12">
                                            <div>{{loop.index + 1}}. {{recipe.recipe_name}}</div>
                                            <div>by {{recipe.author}}</div>
                                            <div>
                                                <a href="{{ url_for('recipe', id=recipe._id) }}"> <button type="button" class="btn btn-primary">Go to Recipe</button></a></div>
                                        </div>
                               {% endfor %}
                                        
                    
                          </div>
                          </div>

        </div>
           
           
     
        

        
    
                    
           
                      <div class="row recipe-row">
                           <div class="col-12">
                               <h2 class='text-center'>Recently Submitted</h2>
                            </div>
                            <div class="col-12">
                                     <ol>
                                        {% for recent in most_recent %}
                                        <li>{{recent.recipe_name}} by {{recent.author}} <a href="{{ url_for('recipe', id=recent._id) }}"><br>
                                        <button type="button" class="btn btn-primary">Go to Recipe</button></a> </li>
                                        {% endfor %}
                                    </ol>
                            </div>
                     </div>

    </div>
   
    
    
    {% endblock %}